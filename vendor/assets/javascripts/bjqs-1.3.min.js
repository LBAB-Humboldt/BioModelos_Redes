/*
 * Basic jQuery Slider plug-in v.1.3
 *
 * http://www.basic-slider.com
 *
 * Authored by John Cobb
 * http://www.johncobb.name
 * @john0514
 *
 * Copyright 2011, John Cobb
 * License: GNU General Public License, version 3 (GPL-3.0)
 * http://www.opensource.org/licenses/gpl-3.0.html
 */
 (function(d){d.fn.bjqs=function(D){var a=d.extend({},{width:700,height:300,animtype:"fade",animduration:450,animspeed:4E3,automatic:!0,showcontrols:!0,centercontrols:!0,nexttext:"Next",prevtext:"Prev",showmarkers:!0,centermarkers:!0,keyboardnav:!0,hoverpause:!0,usecaptions:!0,randomstart:!1,responsive:!1},D),e=this,g=e.find("ul.bjqs"),b=g.children("li"),t=null,y=null,A=null,q=null,w=null,u=null,B=null,C=null,k=b.length,r=!1,p=!1,l=1,s=0,h=0,m=0,x=null,z,f=null,c=null,v=null,F=function(){f=e.outerWidth();v=f/a.width;c=a.height*v;"fade"===a.animtype&&(b.css({height:a.height,width:"100%"}),b.children("img").css({height:a.height,width:"100%"}),g.css({height:a.height,width:"100%"}),e.css({height:a.height,"max-width":a.width,position:"relative"}),f<a.width&&(b.css({height:c}),b.children("img").css({height:c}),g.css({height:c}),e.css({height:c})),d(window).resize(function(){f=e.outerWidth();v=f/a.width;c=a.height*v;b.css({height:c});b.children("img").css({height:c});g.css({height:c});e.css({height:c})}));"slide"===a.animtype&&(b.css({height:a.height,width:a.width}),b.children("img").css({height:a.height,width:a.width}),g.css({height:a.height,width:a.width*a.slidecount}),e.css({height:a.height,"max-width":a.width,position:"relative"}),f<a.width&&(b.css({height:c}),b.children("img").css({height:c}),g.css({height:c}),e.css({height:c})),d(window).resize(function(){f=e.outerWidth();v=f/a.width;c=a.height*v;b.css({height:c,width:f});b.children("img").css({height:c,width:f});g.css({height:c,width:f*a.slidecount});e.css({height:c});u.css({height:c,width:f});E(function(){n(!1,l)},200,"some unique string")}))},E=function(){var a={};return function(b,c,d){d||(d="Don't call this twice without a uniqueId");a[d]&&clearTimeout(a[d]);a[d]=setTimeout(b,c)}}(),G=function(){t=d('<ul class="bjqs-controls"></ul>');y=d('<li class="bjqs-next"><a href="#" data-direction="forward">'+a.nexttext+"</a></li>");A=d('<li class="bjqs-prev"><a href="#" data-direction="previous">'+a.prevtext+"</a></li>");t.on("click","a",function(a){a.preventDefault();a=d(this).attr("data-direction");r||("forward"===a&&n("forward",!1),"previous"===a&&n("previous",!1))});A.appendTo(t);y.appendTo(t);t.appendTo(e);if(a.centercontrols){t.addClass("v-centered");var b=(e.height()-y.children("a").outerHeight())/2/a.height*100+"%";y.find("a").css("top",b);A.find("a").css("top",b)}},H=function(){q=d('<ol class="bjqs-markers"></ol>');d.each(b,function(b,c){var g=b+1,f=b+1;"slide"===a.animtype&&(f=b+2);var e=d('<li><a href="#">\u2022</a></li>');g===l&&e.addClass("active-marker");e.on("click","a",function(a){a.preventDefault();r||l===f||n(!1,f)});e.appendTo(q)});q.appendTo(e);w=q.find("li");if(a.centermarkers){q.addClass("h-centered");var c=(a.width-q.width())/2;q.css("left",c)}},I=function(){d(document).keyup(function(b){p||(clearInterval(x),p=!0);r||(39===b.keyCode?(b.preventDefault(),n("forward",!1)):37===b.keyCode&&(b.preventDefault(),n("previous",!1)));p&&a.automatic&&(x=setInterval(function(){n("forward")},a.animspeed),p=!1)})},J=function(){e.hover(function(){p||(clearInterval(x),p=!0)},function(){p&&(x=setInterval(function(){n("forward",!1)},a.animspeed),p=!1)})},K=function(){d.each(b,function(a,b){var c=d(b).children("img:first-child").attr("title");c||(c=d(b).children("a").find("img:first-child").attr("title"));c&&(c=d('<p class="bjqs-caption">'+c+"</p>"),c.appendTo(d(b)))})},L=function(){var a=Math.floor(Math.random()*k)+1;l=a;h=a-1},n=function(c,d){if(!r&&(r=!0,d?(s=d,m=d-1):"forward"===c?b.eq(h).next().length?(m=h+1,s=l+1):(m=0,s=1):b.eq(h).prev().length?(m=h-1,s=l-1):(m=k-1,s=k),"fade"===a.animtype&&(a.showmarkers&&(w.removeClass("active-marker"),w.eq(m).addClass("active-marker")),b.eq(h).fadeOut(a.animduration),b.eq(m).fadeIn(a.animduration,function(){r=!1;l=s;h=m})),"slide"===a.animtype)){if(a.showmarkers){var e=m-1;e===k-2?e=0:-1===e&&(e=k-3);w.removeClass("active-marker");w.eq(e).addClass("active-marker")}z=a.responsive&&f<a.width?f:a.width;g.animate({left:-m*z},a.animduration,function(){l=s;h=m;"last"===b.eq(h).attr("data-clone")?(g.css({left:-z}),l=2,h=1):"first"===b.eq(h).attr("data-clone")&&(g.css({left:-z*(k-2)}),l=k-1,h=k-2);r=!1})}};(function(){b.addClass("bjqs-slide");a.responsive?F():(b.css({height:a.height,width:a.width}),g.css({height:a.height,width:a.width}),e.css({height:a.height,width:a.width,position:"relative"}));1<k?(a.randomstart&&L(),a.showcontrols&&G(),a.showmarkers&&H(),a.keyboardnav&&I(),a.hoverpause&&a.automatic&&J(),"slide"===a.animtype&&(B=b.eq(0).clone(),C=b.eq(k-1).clone(),B.attr({"data-clone":"last","data-slide":0}).appendTo(g).show(),C.attr({"data-clone":"first","data-slide":0}).prependTo(g).show(),b=g.children("li"),k=b.length,u=d('<div class="bjqs-wrapper"></div>'),a.responsive&&f<a.width?(u.css({width:f,height:c,overflow:"hidden",position:"relative"}),g.css({width:f*(k+2),left:-f*l})):(u.css({width:a.width,height:a.height,overflow:"hidden",position:"relative"}),g.css({width:a.width*(k+2),left:-a.width*l})),b.css({"float":"left",position:"relative",display:"list-item"}),u.prependTo(e),g.appendTo(u))):a.automatic=!1;a.usecaptions&&K();"slide"!==a.animtype||a.randomstart||(h=1,l=2);g.show();b.eq(h).show();a.automatic&&(x=setInterval(function(){n("forward",!1)},a.animspeed))})()}})(jQuery);